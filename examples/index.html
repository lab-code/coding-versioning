
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <link rel="shortcut icon" href="../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.10.1">
    
    
      
        <title>Examples - Code better</title>
      
    
    
      <script src="../assets/javascripts/modernizr-e826f8942a.js"></script>
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-a20f419c8e.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Code better" class="md-header-nav__button md-logo">
          
            <i class="md-icon md-icon--home"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
            
            Examples
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="" data-md-lang-tokenizer="[\s\-]+">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <div class="md-nav__button md-logo">
      
        <i class="md-icon md-icon--home"></i>
      
    </div>
    Code better
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../versioning/" title="Versioning" class="md-nav__link">
      Versioning
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../coding-style/" title="Coding style" class="md-nav__link">
      Coding style
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../coding-tips/" title="Coding tips" class="md-nav__link">
      Coding tips
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Examples
      </label>
    
    <a href="./" title="Examples" class="md-nav__link md-nav__link--active">
      Examples
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-this-code-doing" title="What is this code doing?" class="md-nav__link">
    What is this code doing?
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Languages
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Languages
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../languages/matlab/" title="Matlab" class="md-nav__link">
      Matlab
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../languages/r/" title="R" class="md-nav__link">
      R
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../languages/python/" title="Python" class="md-nav__link">
      Python
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-this-code-doing" title="What is this code doing?" class="md-nav__link">
    What is this code doing?
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="rewriting-r-code">Rewriting R code</h1>
<h2 id="what-is-this-code-doing">What is this code doing?</h2>
<p>Have a look at the following simple code control.</p>
<pre><code class="r">  d = 0
  wkd = 7
  w = 0
  nd = 0
  y = 0
  while(nd &lt; 1000){
    d = d + 1
    if (d == wkd){
      d = 0
      w = w + 1
    }
    nd = nd + 1
    if (d == 365){
      y = y + 1
    }
  }
  print(w)
  print(y)
</code></pre>

<p>In the end you probably figured out what it does. It basically counts the number of days and weeks in the 1000 days that begin the statement. Well, the truth is, that you read it and have no idea what is happening. THat is bad. Nobody can fix if something goes wrong. There might be bug inside that you miss and you have no idea where - and there is a bug in the code. So what you happen if we just fix it with comments?</p>
<pre><code class="r">  #day counter
  d = 0
  #days in a week
  wkd = 7
  #number of weeks
  w = 0
  #number of days
  nd = 0
  #number of years
  y = 0
  while(nd &lt; 1000){
    d = d + 1 #add a day
    if (d == wkd){ #check if week
      d = 0
      w = w + 1 #add 1 to weeks
    }
    nd = nd + 1 #add counter
    if (d == 365){ #check if days equal number of days in a year
      y = y + 1 #add one to year
    }
  }
  print(w)
  print(y)
</code></pre>

<p>Did I solve something? No. I made thing worse, less readable and longer. So let's make it slightly better.</p>
<pre><code class="r">  dayCounter = 0
  daysInWeek = 7
  nWeeks= 0
  nDays = 0
  nYears = 0
  while(nDays &lt; 1000){
    dayCounter = dayCounter + 1
    if (dayCounter == daysInWeek){
      dayCounter = 0
      nWeeks = nWeeks + 1
    }
    nDays = nDays + 1
    if (dayCounter == 365){
      nYears = nYears + 1
    }
  }
  print(nWeeks)
  print(nDays)
</code></pre>

<p>Suddenly we don't need comments and also the bug is immediatelly clear.</p>
<pre><code class="r">if (dayCounter == 365){
  nYears = nYears + 1
}
</code></pre>

<p>Should be</p>
<pre><code class="r">if (nDays == 365){
  nYears = nYears + 1
}
</code></pre>

<p>But we can make things even better. Days in week is a constant, so we mark it as such. Also, days in week are variable but days in year are not. That is inconsistent. So following is more clear</p>
<pre><code class="r">DAYS_IN_WEEK = 7
DAYS_IN_YEAR = 365
</code></pre>

<p>Rewrite one line if for shorter code (if the language allows it)</p>
<pre><code class="r">if (dayCounter == 365) nYears = nYears + 1
</code></pre>

<p>And most importantly, put everything that does one thing into a function. Now the problem with R is that id doesn't allow two outputs from function, so we need to be smart about it. One option is to write two functions.</p>
<pre><code class="r">function = WeeksInDays(nDays){
  DAYS_IN_WEEK = 7
  dayCounter = 0
  nWeeks = 0
  for(i in 1:nDays){
    dayCounter = dayCounter + 1
    if (dayCounter == DAYS_IN_WEEK){
      dayCounter = 0
      nWeeks = nWeeks + 1
    }
  }
  return(nWeeks);
}
function = YearsInDays(nDays){
  DAYS_IN_YEAR = 365
  dayCounter = 0
  nYears = 0
  for(i in 1:nDays){
    dayCounter = dayCounter + 1
    if (dayCounter == DAYS_IN_YEAR){
      dayCounter = 0
      nYears = nYears + 1
    }
  }
  return(nYears);
}
print(WeeksInDays(1000))
print(YearsInDays(1000))
</code></pre>

<p>Now that looks better but actually, for loop is crap to do such thing. Always try to thing if there is simple sollution that uses less lines of code. Formely it was paramount to write economic code, but now readibility is preffered. So what about modulo?</p>
<pre><code class="r">function = WeeksInDays(nDays){
  DAYS_IN_WEEK = 7
  remainderDays = nDays %% DAYS_IN_WEEK
  nWeeks = (ndays - remainderDays) / DAYS_IN_WEEK
  return(nWeeks);
}
function = YearsInDays(nDays){
  DAYS_IN_YEAR = 365
  remainderDays = nDays %% DAYS_IN_YEAR
  nYears = (ndays - remainderDays) / DAYS_IN_YEAR
  return(nYears);
}
print(WeeksInDays(1000))
print(YearsInDays(1000))
</code></pre>

<p>And as a last touch, we see there is duplicit code, so let's deal with it right now.</p>
<pre><code class="r">function = DivideWithoutRemainder(num1, num2){
  remainder = num1 %% num2
  return((num1 - remainder) / num2)
}
function = WeeksInDays(nDays){
  nWeeks = DivideWithoutRemainder(nDays, 7)
  return(nWeeks);
}
function = YearsInDays(nDays){
  nYears = DivideWithoutRemainder(nDays, 365)
  return(nYears);
}
print(WeeksInDays(1000))
print(YearsInDays(1000))
</code></pre>

<p>This created legible structured code that is easy to maintain as well as understand. Didn't we go quite a trip from the horrific start?</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../coding-tips/" title="Coding tips" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Coding tips
              </span>
            </div>
          </a>
        
        
          <a href="../languages/matlab/" title="Matlab" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Matlab
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-f3ab9e5ff8.js"></script>
      
      
      <script>app.initialize({url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>